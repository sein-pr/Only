{% extends "base.html" %}

{% block title %}Login - Only{% endblock %}

{% block content %}
<div class="container-fluid p-0" style="height: calc(100vh - 80px);">
    <div class="row g-0 h-100">
        <!-- Left Side - Promotional Content -->
        <div class="col-lg-6 login-promo d-flex align-items-center justify-content-center text-white position-relative">
            <div class="sliding-bg position-absolute w-100 h-100"></div>
            <div class="text-center z-index-2 position-relative p-5">
                <div class="promo-slide" id="promoContent">
                    <i class="fas fa-shopping-bag fa-4x mb-4"></i>
                    <h1 class="display-4 fw-bold mb-4">Welcome to Only</h1>
                    <p class="lead mb-4">Your premium shopping destination with thousands of products from trusted sellers worldwide.</p>
                    
                    <div class="row text-center mt-5">
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-truck"></i>
                            </div>
                            <h6>Free Shipping</h6>
                            <small>On orders over $50</small>
                        </div>
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h6>Secure Payment</h6>
                            <small>100% protected</small>
                        </div>
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-headset"></i>
                            </div>
                            <h6>24/7 Support</h6>
                            <small>Always here to help</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Side - Login Form -->
        <div class="col-lg-6 d-flex align-items-center justify-content-center bg-light">
            <div class="w-100 px-5" style="max-width: 400px;">
                <div class="slide-in">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold mb-2" style="color: #ea580c;">Sign In</h2>
                        <p class="text-muted">Welcome back! Please sign in to your account.</p>
                    </div>
                    
                    <form method="POST" class="needs-validation" novalidate>
                        {{ form.hidden_tag() }}
                        
                        <div class="mb-3 form-floating">
                            {{ form.email(class="form-control form-control-lg", placeholder="Enter your email", id="floatingEmail") }}
                            <label for="floatingEmail" class="fw-medium">Email Address</label>
                            {% if form.email.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.email.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-3 form-floating">
                            {{ form.password(class="form-control form-control-lg", placeholder="Enter your password", id="floatingPassword") }}
                            <label for="floatingPassword" class="fw-medium">Password</label>
                            <div class="position-absolute end-0 top-50 translate-middle-y me-3">
                                <i class="fas fa-eye" id="togglePassword" style="cursor: pointer; color: #6c757d;"></i>
                            </div>
                            {% if form.password.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.password.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-4 d-flex justify-content-between align-items-center">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="remember">
                                <label class="form-check-label" for="remember">
                                    Remember me
                                </label>
                            </div>
                            <a href="#" class="text-decoration-none small" style="color: #ea580c;">
                                Forgot password?
                            </a>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-lg w-100 mb-3" id="loginBtn">
                            <span class="btn-text">
                                <i class="fas fa-sign-in-alt me-2"></i>Sign In
                            </span>
                            <span class="btn-loading d-none">
                                <i class="fas fa-spinner fa-spin me-2"></i>Signing In...
                            </span>
                        </button>
                        
                        <div class="text-center">
                            <p class="mb-0">Don't have an account? 
                                <a href="{{ url_for('register') }}" class="text-decoration-none fw-medium" style="color: #ea580c;">
                                    Sign up here
                                </a>
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // Animate form elements on focus
        const inputs = document.querySelectorAll('.form-control');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'translateY(-2px)';
                this.parentElement.style.transition = 'all 0.3s ease';
                this.style.borderColor = '#ea580c';
                this.style.boxShadow = '0 0 0 0.2rem rgba(234, 88, 12, 0.25)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateY(0)';
                this.style.borderColor = '';
                this.style.boxShadow = '';
            });
        });
        
        // Password toggle functionality
        const togglePassword = document.getElementById('togglePassword');
        const passwordField = document.getElementById('floatingPassword');
        
        togglePassword.addEventListener('click', function() {
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            
            this.classList.toggle('fa-eye');
            this.classList.toggle('fa-eye-slash');
        });
        
        // Form submission animation
        const loginForm = document.querySelector('form');
        const loginBtn = document.getElementById('loginBtn');
        
        loginForm.addEventListener('submit', function() {
            const btnText = loginBtn.querySelector('.btn-text');
            const btnLoading = loginBtn.querySelector('.btn-loading');
            
            btnText.classList.add('d-none');
            btnLoading.classList.remove('d-none');
            loginBtn.disabled = true;
        });
        
        // Promotional content rotation
        const promoContents = [
            {
                icon: 'fas fa-shopping-bag',
                title: 'Welcome to Only',
                subtitle: 'Your premium shopping destination with thousands of products from trusted sellers worldwide.'
            },
            {
                icon: 'fas fa-store',
                title: 'Trusted Sellers',
                subtitle: 'Shop with confidence from verified sellers who provide quality products and excellent service.'
            },
            {
                icon: 'fas fa-gift',
                title: 'Amazing Deals',
                subtitle: 'Discover daily deals, seasonal sales, and exclusive offers on your favorite products.'
            }
        ];
        
        let currentPromo = 0;
        
        function rotatePromoContent() {
            const promoElement = document.getElementById('promoContent');
            
            // Fade out
            promoElement.style.opacity = '0';
            promoElement.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                currentPromo = (currentPromo + 1) % promoContents.length;
                const promo = promoContents[currentPromo];
                
                promoElement.innerHTML = `
                    <i class="${promo.icon} fa-4x mb-4"></i>
                    <h1 class="display-4 fw-bold mb-4">${promo.title}</h1>
                    <p class="lead mb-4">${promo.subtitle}</p>
                    
                    <div class="row text-center mt-5">
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-truck"></i>
                            </div>
                            <h6>Free Shipping</h6>
                            <small>On orders over $50</small>
                        </div>
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h6>Secure Payment</h6>
                            <small>100% protected</small>
                        </div>
                        <div class="col-4">
                            <div class="feature-icon">
                                <i class="fas fa-headset"></i>
                            </div>
                            <h6>24/7 Support</h6>
                            <small>Always here to help</small>
                        </div>
                    </div>
                `;
                
                // Fade in
                promoElement.style.opacity = '1';
                promoElement.style.transform = 'translateY(0)';
            }, 300);
        }
        
        // Start promotional content rotation
        setInterval(rotatePromoContent, 5000);
        
        // Add parallax effect to background
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const parallax = document.querySelector('.sliding-bg');
            if (parallax) {
                const speed = scrolled * 0.5;
                parallax.style.transform = `translateY(${speed}px)`;
            }
        });
    });
</script>
{% endblock %}
